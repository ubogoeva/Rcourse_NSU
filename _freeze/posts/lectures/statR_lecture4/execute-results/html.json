{
  "hash": "53df7a7f8328ef44b501556be109658c",
  "result": {
    "markdown": "---\ntitle: \"Язык программирования R для анализа данных: лекция 4\"\nsubtitle: 'Введение в tidyverse, основные функции dplyr'\nauthor: \"Elena U\"\ndate: \"Created on 07 March, 2023\"\nexecute:\n  echo: true\n  output: true\nformat: \n  revealjs:\n    slide-number: c/t\n    show-slide-number: all\n    # mainfont: Arial\n    # fontsize: 14px\n    theme: [default, custom.scss]\n    chalkboard: \n      buttons: true\n    # theme: [serif]\n    # mouse-wheel: true\n    auto-play-media: true\n    width: 1280\n    height: 720\n    # logo: figures/icg.png\nrevealjs-plugins:\n  - pointer\neditor: visual\ndraft: true\n---\n\n\n\n\n## Цель занятия\n\nРазберем наиболее важные функции `tidyverse`, в основном из пакета `dplyr`.\n\n::: columns\n::: {.column width=\"60%\"}\nЧто почитать:\n\n-   [R4DataScience](https://r4ds.had.co.nz/index.html) - книга от центрального разработчика `tidyverse` Hadley Wickham и Garrett Grolemund.\n\n-   [Анализ данных и статистика в R](https://pozdniakov.github.io/tidy_stats/index.html) (автор Иван Поздняков).\n\n-   [ggplot2: Elegant Graphics for Data Analysis](https://ggplot2-book.org/) (Hadley Wickham, Danielle Navarro, and Thomas Lin Pedersen).\n\n-   [Туториал по библиотеке `purrr`](https://github.com/cwickham/purrr-tutorial/blob/master/slides.pdf) от Charlotte Wickham\n:::\n\n::: {.column width=\"40%\"}\n![](https://d33wubrfki0l68.cloudfront.net/b88ef926a004b0fce72b2526b0b5c4413666a4cb/24a30/cover.png){fig-align=\"right\" width=\"364\"}\n:::\n:::\n\n## Подходы к анализу данных в R {style=\"font-size: 95%\"}\n\nМожно выделить три основных подхода для манипуляций с данными в R:\\\nbase R, `tidyverse`, `data.table`.\n\n::: {style=\"position: absolute; top: 227px; left: 5px; width: 1270px; height: 223px; background-color: rgba(169, 209, 142, 0.3); z-index: -1; border-radius: 5px;\"}\n:::\n\n::: {style=\"position: absolute; top: 450px; left: 5px; width: 1270px; height: 200px; background-color: rgba(209, 162, 142, 0.3); z-index: -1; border-radius: 5px;\"}\n:::\n\n+-----------+-----------------------+-------------------------------------------------------------------------------------------+------------------------------------------------------------------+\n|           | base R                | tidyverse                                                                                 | data.table                                                       |\n+===========+=======================+===========================================================================================+==================================================================+\n| **+**     | Стабильный,\\          | Быстрее, чем base,\\                                                                       | Лаконичный синтаксис,\\                                           |\n|           | доступен по умолчанию | много источников,\\                                                                        | очень быстрый,\\                                                  |\n|           |                       | понятный синтаксис, использование пайпов                                                  | эффективный по памяти, нет зависимостей, обратная совместимость  |\n+-----------+-----------------------+-------------------------------------------------------------------------------------------+------------------------------------------------------------------+\n| **-**     | Медленно работает,\\   | Много зависимостей, медленнее чем `data.table`, бывают проблемы с обратной совместимостью | Лаконичный синтаксис бывает трудно расшифровать, сложнее изучать |\n|           | неуклюжий синтаксис   |                                                                                           |                                                                  |\n+-----------+-----------------------+-------------------------------------------------------------------------------------------+------------------------------------------------------------------+\n\nЕсли данных немного - рекомендую `tidyverse`, если таблицы измеряются в гигабайтах - `data.table`.\n\n## Немного контекста\n\n`tidyverse` - набор пакетов для анализа данных, объединенных сходным синтаксисом и философией. Есть ключевые пакеты (core tidyverse), есть ряд дополнительных для работы с различными данными и форматами (например библиотека `readxl` для чтения .xlsx файлов).\n\n::: callout-tip\n## Совет:\n\nПодробнее со сравнением base/tidyverse/data.table можно ознакомиться [здесь](https://mgimond.github.io/rug_2019_12/Index.html)\n:::\n\n## Core tidyverse - 8 основных пакетов\n\n::: columns\n::: {.column width=\"50%\"}\n-   `dplyr` для манипуляций с таблицами\n\n-   `readr` для быстрого чтения и записи данных в R\n\n-   `tidyr` для приведения табличек в аккуратный вид\n\n-   `tibble` более аккуратный и быстрый вариант датафрейма\n\n-   `ggplot2` для работы с графиками\n\n-   `stringr` для работы со строками\n\n-   `purrr` для замены циклов и функций семейства `*apply()`\n\n-   `forcats` для работы с факторами\n:::\n\n::: {.column width=\"50%\"}\n![](https://uopsych-r-bootcamp-2020.netlify.app/slides/images/tidyverse_packages.png)\n:::\n:::\n\n## Cheatsheets\n\nДля многих пакетов в `tidyverse` есть свои cheatsheets (шпаргалки) - собранные на одном листе краткие описания наиболее часто использующихся команд:\n\n-   Reading and writing: [readr](https://readr.tidyverse.org/#cheatsheet)\n\n-   Data manipulation: [dplyr](https://dplyr.tidyverse.org/#cheat-sheet)\n\n-   Tidying data: [tidyr](https://tidyr.tidyverse.org/#cheatsheet)\n\n-   Visualization: [ggplot2](https://ggplot2.tidyverse.org/#cheatsheet)\n\n-   String manipulation: [stringr](https://stringr.tidyverse.org/#cheatsheet)\n\nЛучше всего найти актуальные читшиты из самой RStudio: Help -\\> Cheet Sheets (иначе можно наткнуться на устаревший читшит).\n\n## Установка tidyverse\n\nДля установки всего набора \"пакета с пакетами\" достаточно набрать в консоли R:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"tidyverse\")\n```\n:::\n\n\nДля загрузки пакета:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n## Философия tidyverse: основные принципы\n\n-   Использование и переиспользование уже существующих структур данных (прямоугольная таблица);\n\n-   Сочетание простых функций в конвейере (пайпы);\n\n-   Следование парадигме функционального программирования;\n\n-   Понятный и удобный дизайн функций (например, общий префикс у сходных функций).\n\n## Пайпы - основа философии tidyverse {.smaller}\n\n::: incremental\n-   Можно записать код так:\\\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    leave_house(get_dressed(get_out_of_bed(wake_up(me))))\n    ```\n    :::\n\n\n-   Или создать кучу промежуточных переменных:\\\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    woken_up_me <- wake_up(me)\n    standing_up_me <- get_out_of_bed(woken_up_me)\n    dressed_me <- get_dressed(standing_up_me)\n    ready_me <- leave_house(dressed_me)\n    ```\n    :::\n\n\n-   Но для большей читаемости используем:\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    me %>%\n      wake_up() %>%\n      get_out_of_bed() %>%\n      get_dressed() %>%\n      leave_house()\n    ```\n    :::\n\n:::\n\n## Пайпы - классная иллюстрация\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](figures/pipe.mp4){width=500px}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\nБез пайпов это было бы: `slice(decorate(bake(mix(ingredients))))`\n\npipe - `%>%` в тайдиверс стиле. Горячая клавиша: Ctrl Shift M.\n\n::: {.callout-note appearance=\"simple\"}\nС R 4.1 добавили нативный пайп `|>` (доступен без тайдиверса), однако мы будем пользоваться `%>%` этим пайпом.\n:::\n:::\n:::\n\n## Пример использования пайпов {style=\"font-size: 90%\"}\n\nНапример,\n\n\n::: {.cell}\n\n```{.r .cell-code}\n4 %>% \n  sqrt() %>% \n  log(base = 2) %>% \n  sum(2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 3\n```\n:::\n:::\n\n\nТоже самое, что и\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(2, log(sqrt(4), base = 2))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 3\n```\n:::\n:::\n\n\nЕсли нужно пробросить данные в следующую функцию не на первую позицию, то можно использовать `.`\n\n\n::: {.cell}\n\n```{.r .cell-code}\n4 %>% \n  sqrt %>% \n  log(8, base = .)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 3\n```\n:::\n:::\n\n\n## dplyr - мощный пакет для преобразования таблиц\n\nЕсть множество `dplyr` *глаголов* (verbs), которые позволяют сделать практически любое преобразование данных. Основными и наиболее часто использующими *глаголами* являются:\n\n-   `select()` - выбор столбцов по названию или индексу;\n-   `filter()` - выбор строк по условию;\n-   `mutate()` - создание новых колонок;\n-   `group_by()` - группировка;\n-   `summarise()` - подсчет суммарных статистик;\n-   `arrange()` - сортировка.\n\nРазберем каждый из них поподробнее.\n\n## Данные для работы\n\nСтатистики по юнитам из Warcraft 3.\n\nСкачала [отсюда](https://www.unitstatistics.com/warcraft3/) и сохранила в [github](https://raw.githubusercontent.com/ubogoeva/tidyverse_tutorial/master/data/wc3_heroes.txt)-репозитории.\n\nЗагрузим данные, на этот раз с использованием функции из библиотеки `readr`:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|3\"}\nwc3_units <- read_tsv('https://raw.githubusercontent.com/ubogoeva/tidyverse_tutorial/master/data/wc3_heroes.txt',\n                      col_names = TRUE, \n                      na = '-', \n                      name_repair = 'minimal') %>% \n  janitor::clean_names() # для правильных названий колонок\n```\n:::\n\n\n-   Здесь для правильного чтения пропущенных значений используем параметр: `na = '-'`.\n\n<!-- -->\n\n-   `janitor::clean_names()` для синтаксически правильных имен колонок.\n\n## Посмотрим на данные\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(wc3_units[,1:7])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 7\n  unit     race   gold  wood   pop    hp armor_type\n  <chr>    <chr> <dbl> <dbl> <dbl> <dbl> <chr>     \n1 Peasant  Human    75     0     1   220 Medium    \n2 Militia  Human    NA    NA     1   220 Heavy     \n3 Footman  Human   135     0     2   420 Heavy     \n4 Rifleman Human   205    30     3   535 Medium    \n5 Knight   Human   245    60     4   835 Heavy     \n6 Priest   Human   135    10     2   290 Unarmored \n```\n:::\n:::\n\n\n::: callout-tip\nКстати тоже самое можно записать с помощью пайпа:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% head\n```\n:::\n\n:::\n\n## Чем просто датафрейм отличается от тиббла?\n\nТиббл (tibble) из библиотеки `tibble`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(wc3_units)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"spec_tbl_df\" \"tbl_df\"      \"tbl\"         \"data.frame\" \n```\n:::\n\n```{.r .cell-code}\nwc3_units\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 71 × 21\n   unit         race   gold  wood   pop    hp armor_type armor sight speed  time\n   <chr>        <chr> <dbl> <dbl> <dbl> <dbl> <chr>      <dbl> <dbl> <dbl> <dbl>\n 1 Peasant      Human    75     0     1   220 Medium         0    80   190    15\n 2 Militia      Human    NA    NA     1   220 Heavy          4   140   270    NA\n 3 Footman      Human   135     0     2   420 Heavy          2   140   270    20\n 4 Rifleman     Human   205    30     3   535 Medium         0   140   270    26\n 5 Knight       Human   245    60     4   835 Heavy          5   140   350    45\n 6 Priest       Human   135    10     2   290 Unarmored      0   140   270    28\n 7 Sorceress    Human   155    20     2   325 Unarmored      0   140   270    30\n 8 Spell Break… Human   215    30     3   600 Medium         3   140   300    28\n 9 Flying Mach… Human    90    30     1   200 Heavy          2   180   400    13\n10 Mortar Team  Human   180    70     3   360 Heavy          0   140   270    40\n# ℹ 61 more rows\n# ℹ 10 more variables: ground_attack <chr>, damage <dbl>, cooldown <dbl>,\n#   dps <dbl>, range <dbl>, air_attack <chr>, damage_2 <dbl>, cooldown_2 <dbl>,\n#   dps_2 <dbl>, range_2 <dbl>\n```\n:::\n:::\n\n\n## Чем просто датафрейм отличается от тиббла?\n\nОбычный датафрейм:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units_df <- read.table('data/wc3_units.txt', sep = '\\t', \n                 header = TRUE, na.strings = '-')\nwc3_units_df\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                  Unit   Race Gold Wood Pop   HP   Armor.Type Armor Sight Speed\n1              Peasant  Human   75    0   1  220       Medium     0    80   190\n2              Militia  Human   NA   NA   1  220        Heavy     4   140   270\n3              Footman  Human  135    0   2  420        Heavy     2   140   270\n4             Rifleman  Human  205   30   3  535       Medium     0   140   270\n5               Knight  Human  245   60   4  835        Heavy     5   140   350\n6               Priest  Human  135   10   2  290    Unarmored     0   140   270\n7            Sorceress  Human  155   20   2  325    Unarmored     0   140   270\n8        Spell Breaker  Human  215   30   3  600       Medium     3   140   300\n9       Flying Machine  Human   90   30   1  200        Heavy     2   180   400\n10         Mortar Team  Human  180   70   3  360        Heavy     0   140   270\n11        Siege Engine  Human  195   60   3  700         Fort     2   140   220\n12       Gryphon Rider  Human  280   70   4  825        Light     0   160   320\n13    Dragonhawk Rider  Human  200   30   3  575        Light     1   140   350\n14   Water Elemental 1  Human   NA   NA  NA  525        Heavy     0   120   220\n15   Water Elemental 2  Human   NA   NA  NA  675        Heavy     1   120   220\n16   Water Elemental 3  Human   NA   NA  NA  900        Heavy     2   120   220\n17             Phoenix  Human   NA   NA  NA 1250        Light     1   160   320\n18                Peon    Orc   75    0   1  250       Medium     0    80   190\n19               Grunt    Orc  200    0   3  700        Heavy     1   140   270\n20       T. Headhunter    Orc  135   20   2  350       Medium     0   140   270\n21        T. Berserker    Orc  135   20   2  450       Medium     0   140   270\n22          Demolisher    Orc  220   50   4  425        Heavy     2   140   220\n23              Raider    Orc  180   40   3  610       Medium     1   140   350\n24              Tauren    Orc  280   80   5 1300        Heavy     3   140   270\n25              Shaman    Orc  130   20   2  335    Unarmored     0   140   270\n26        Witch Doctor    Orc  145   25   2  315    Unarmored     0   140   270\n27       Spirit Walker    Orc  195   35   3  500    Unarmored     0   140   270\n28          Kodo Beast    Orc  255   60   4 1000    Unarmored     1   140   220\n29          Wind Rider    Orc  265   40   4  570        Light     0   160   320\n30      Troll Batrider    Orc  160   40   2  325        Light     0   140   320\n31         Spirit Wolf    Orc   NA   NA  NA  200        Heavy     0   120   320\n32           Dire Wolf    Orc   NA   NA  NA  300        Heavy     0   120   350\n33         Shadow Wolf    Orc   NA   NA  NA  500        Heavy     0   120   350\n34        Serpent Ward    Orc   NA   NA  NA   75        Heavy     0   120    NA\n35                Wisp  N.Elf   60    0   1  120       Medium     0   100   270\n36              Archer  N.Elf  130   10   2  245       Medium     0   140   270\n37            Huntress  N.Elf  195   20   3  600    Unarmored     2   140   350\n38      Glaive Thrower  N.Elf  210   65   3  300        Heavy     2   140   220\n39               Dryad  N.Elf  145   60   3  435    Unarmored     0   140   350\n40      DoC Druid Form  N.Elf  255   80   4  130        Heavy     1   140   270\n41       DoC Bear Form  N.Elf   NA   NA   4  960        Heavy     3   140   270\n42      Mountain Giant  N.Elf  425  100   7 1600       Medium     4   120   270\n43    Mountain Giant 2  N.Elf  425  100   7 1600       Medium    10   120   270\n44          Hippogryph  N.Elf  160   20   2  525    Unarmored     0   160   400\n45      DoT Druid Form  N.Elf  135   20   2  300    Unarmored     0   140   270\n46       DoT Crow Form  N.Elf   NA   NA   2  300    Unarmored     0   160   320\n47       Faerie Dragon  N.Elf  155   25   2  450        Light     0   160   350\n48    Hippogryph Rider  N.Elf   NA   NA   4  765        Light     1   160   350\n49            Chimaera  N.Elf  330   70   5 1000        Light     2   160   250\n50          Chimaera 2  N.Elf  330   70   5 1000        Light     2   160   250\n51              Treant  N.Elf   NA   NA  NA  300        Heavy     0   120   220\n52 Avatar of Vengeance  N.Elf   NA   NA  NA 1200        Heavy     2   120   320\n53 Spirit of Vengeance  N.Elf   NA   NA  NA  500 Invulnerable    NA   120   270\n54             Acolyte Undead   75    0   1  220       Medium     0    80   220\n55               Ghoul Undead  120    0   2  340        Heavy     0   140   270\n56         Crypt Fiend Undead  215   40   3  550       Medium     0   140   270\n57            Gargoyle Undead  185   30   2  410    Unarmored     3   160   350\n58         Abomination Undead  240   70   4 1175        Heavy     2   140   270\n59          Meat Wagon Undead  230   50   4  380        Heavy     2   140   220\n60         Necromancer Undead  145   20   2  305    Unarmored     0   140   270\n61             Banshee Undead  155   30   2  285    Unarmored     0   140   270\n62          Frost Wyrm Undead  385  120   7 1350        Light     1   160   270\n63               Shade Undead   NA   NA   1  125       Medium     0   190   350\n64    Skeleton Warrior Undead   NA   NA   0  180        Heavy     1    80   270\n65       Skeletal Mage Undead   NA   NA   0  230       Medium     0   140   270\n66            Infernal Undead   NA   NA  NA 1500        Heavy     6   140   320\n67    Carrion Beetle 1 Undead   NA   NA   0  140        Heavy     2   120   270\n68    Carrion Beetle 2 Undead   NA   NA   0  275        Heavy     2   120   270\n69    Carrion Beetle 3 Undead   NA   NA   0  410        Heavy     2   120   270\n70     Obsidian Statue Undead  200   35   3  550        Heavy     4   120   270\n71           Destroyer Undead   NA   NA   5  900        Light     3   140   320\n   Time Ground.Attack Damage Cooldown   DPS Range Air.Attack Damage.1\n1    15        Normal    5.5     2.00  2.75   0.0       <NA>       NA\n2    NA        Normal   12.5     1.20 10.42   0.0       <NA>       NA\n3    20        Normal   12.5     1.35  9.26   0.0       <NA>       NA\n4    26        Pierce   21.0     1.50 14.00  40.0     Pierce     21.0\n5    45        Normal   34.0     1.40 24.29   0.0       <NA>       NA\n6    28         Magic    8.5     2.00  4.25  60.0      Magic      8.5\n7    30         Magic   11.0     1.75  6.29  60.0      Magic     11.0\n8    28        Normal   14.0     1.90  7.37  25.0       <NA>       NA\n9    13         Siege    7.5     2.50  3.00   0.0     Pierce     14.5\n10   40         Siege   58.0     3.50 16.57 115.0       <NA>       NA\n11   55         Siege   50.0     2.10 23.81  19.0      Siege     13.5\n12   45         Magic   50.0     2.20 22.73  45.0      Magic     50.0\n13   28        Pierce   19.0     1.75 10.86  30.0     Pierce     19.0\n14   NA        Pierce   20.0     1.50 13.33  30.0     Pierce     20.0\n15   NA        Pierce   35.0     1.50 23.33  30.0     Pierce     35.0\n16   NA        Pierce   45.0     1.50 30.00  30.0     Pierce     45.0\n17   NA         Magic   68.0     1.40 48.57  60.0      Magic     68.0\n18   15        Normal    7.5     3.00  2.50   0.0       <NA>       NA\n19   30        Normal   19.5     1.60 12.19   0.0       <NA>       NA\n20   20        Pierce   25.0     2.31 10.82  45.0     Pierce     25.0\n21   22        Pierce   25.0     2.31 10.82  45.0     Pierce     25.0\n22   40         Siege   80.5     4.50 17.89 115.0       <NA>       NA\n23   28         Siege   25.0     1.85 13.51   0.0       <NA>       NA\n24   44        Normal   33.0     1.90 17.37   0.0       <NA>       NA\n25   30         Magic    8.5     2.10  4.05  60.0      Magic      8.5\n26   30         Magic   12.0     1.75  6.86  60.0      Magic     12.0\n27   38         Magic   19.5     1.75 11.14  40.0      Magic     19.5\n28   30        Pierce   18.0     1.44 12.50  50.0     Pierce     18.0\n29   35        Pierce   40.0     2.00 20.00  45.0     Pierce     40.0\n30   28         Siege   14.0     1.80  7.78  30.0       <NA>       NA\n31   NA        Normal   11.5     1.00 11.50   0.0       <NA>       NA\n32   NA        Normal   16.5     1.00 16.50   0.0       <NA>       NA\n33   NA        Normal   21.5     1.00 21.50   0.0       <NA>       NA\n34   NA        Pierce   12.0     1.50  8.00  60.0     Pierce     12.0\n35   14          <NA>     NA       NA    NA    NA       <NA>       NA\n36   20        Pierce   17.0     1.50 11.33  50.0     Pierce     17.0\n37   30        Normal   17.0     1.80  9.44  22.0       <NA>       NA\n38   48         Siege   44.5     3.50 12.71 115.0       <NA>       NA\n39   30        Pierce   18.0     2.00  9.00  50.0     Pierce     18.0\n40   35        Normal   20.5     1.50 13.67   0.0       <NA>       NA\n41   NA        Normal   36.5     1.50 24.33   0.0       <NA>       NA\n42   45        Normal   34.0     2.50 13.60   0.0       <NA>       NA\n43   45         Siege   41.0     2.50 16.40  25.0       <NA>       NA\n44   40          <NA>     NA       NA    NA    NA     Normal     53.5\n45   22         Magic   12.0     1.60  7.50  60.0      Magic     12.0\n46   NA         Magic     NA     1.75    NA  60.0      Magic     38.0\n47   25        Pierce   15.0     1.75  8.57  30.0     Pierce     15.0\n48   NA        Pierce   17.0     1.10 15.45  40.0     Pierce     17.0\n49   65         Magic   75.0     2.50 30.00  45.0       <NA>       NA\n50   65         Siege   50.0     2.50 20.00  85.0       <NA>       NA\n51   NA        Normal   16.0     1.75  9.14   0.0       <NA>       NA\n52   NA        Normal   30.5     1.35 22.59  45.0     Normal     30.5\n53   NA        Pierce   16.0     1.35 11.85  45.0     Pierce     16.0\n54   15        Normal    9.5     2.50  3.80   0.0       <NA>       NA\n55   18        Normal   13.0     1.30 10.00   0.0       <NA>       NA\n56   30        Pierce   28.5     2.00 14.25  55.0       <NA>       NA\n57   35        Pierce   19.5     2.20  8.86  30.0     Normal     65.5\n58   40        Normal   36.0     1.90 18.95   0.0       <NA>       NA\n59   45         Siege   79.5     4.00 19.88 115.0       <NA>       NA\n60   24         Magic    8.5     1.80  4.72  60.0      Magic      8.5\n61   28         Magic   11.0     1.50  7.33  60.0      Magic     11.0\n62   65         Magic  104.0     3.00 34.67  30.0      Magic     89.0\n63   15          <NA>     NA       NA    NA    NA       <NA>       NA\n64   NA        Normal   14.5     2.00  7.25   0.0       <NA>       NA\n65   NA        Pierce   11.5     1.50  7.67  50.0     Pierce     11.5\n66   NA         Chaos   54.5     1.35 40.37   0.0       <NA>       NA\n67   NA        Normal    8.5     1.50  5.67   0.0       <NA>       NA\n68   NA        Normal   16.5     1.50 11.00   0.0       <NA>       NA\n69   NA        Normal   24.5     1.50 16.33   0.0       <NA>       NA\n70   45         Magic    7.5     2.10  3.57  57.5      Magic      7.5\n71   NA         Magic   20.0     1.35 14.81  45.0      Magic     20.0\n   Cooldown.1 DPS.1 Range.1\n1          NA    NA      NA\n2          NA    NA      NA\n3          NA    NA      NA\n4        1.50 14.00    60.0\n5          NA    NA      NA\n6        2.00  4.25    60.0\n7        1.75  6.29    60.0\n8          NA    NA      NA\n9        2.00  7.25    50.0\n10         NA    NA      NA\n11       2.10  6.43    50.0\n12       2.40 20.83    45.0\n13       1.75 10.86    30.0\n14       1.50 13.33    30.0\n15       1.50 23.33    30.0\n16       1.50 30.00    30.0\n17       1.40 48.57    60.0\n18         NA    NA      NA\n19         NA    NA      NA\n20       2.31 10.82    45.0\n21       2.31 10.82    45.0\n22         NA    NA      NA\n23         NA    NA      NA\n24         NA    NA      NA\n25       2.10  4.05    60.0\n26       1.75  6.86    60.0\n27       1.75 11.14    40.0\n28       1.44 12.50    50.0\n29       2.00 20.00    45.0\n30         NA    NA      NA\n31         NA    NA      NA\n32         NA    NA      NA\n33         NA    NA      NA\n34       1.50  8.00    60.0\n35         NA    NA      NA\n36       1.50 11.33    50.0\n37         NA    NA      NA\n38         NA    NA      NA\n39       2.00  9.00    50.0\n40         NA    NA      NA\n41         NA    NA      NA\n42         NA    NA      NA\n43         NA    NA      NA\n44       1.05 50.95     0.0\n45       1.60  7.50    60.0\n46       1.75 21.71    60.0\n47       1.75  8.57    30.0\n48       1.10 15.45    10.0\n49         NA    NA      NA\n50         NA    NA      NA\n51         NA    NA      NA\n52       1.35 22.59    45.0\n53       1.35 11.85    45.0\n54         NA    NA      NA\n55         NA    NA      NA\n56         NA    NA      NA\n57       1.40 46.79     0.0\n58         NA    NA      NA\n59         NA    NA      NA\n60       1.80  4.72    60.0\n61       1.50  7.33    60.0\n62       3.00 29.67    30.0\n63         NA    NA      NA\n64         NA    NA      NA\n65       1.50  7.67    50.0\n66         NA    NA      NA\n67         NA    NA      NA\n68         NA    NA      NA\n69         NA    NA      NA\n70       2.10  3.57    57.5\n71       1.35 14.81    45.0\n```\n:::\n:::\n\n\nТиббл более аккуратный и быстрый вариант датафрейма.\n\n# Работа с колонками\n\n## `select()` - выбираем нужные колонки по названию или индексу\n\nВыбрать колонку тип брони (armor_type) по названию или индексу (без кавычек).\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nwc3_units %>% \n  select(armor_type)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 71 × 1\n   armor_type\n   <chr>     \n 1 Medium    \n 2 Heavy     \n 3 Heavy     \n 4 Medium    \n 5 Heavy     \n 6 Unarmored \n 7 Unarmored \n 8 Medium    \n 9 Heavy     \n10 Heavy     \n# ℹ 61 more rows\n```\n:::\n\n```{.r .cell-code}\n# также по индексу:\nwc3_units %>% \n  select(7)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 71 × 1\n   armor_type\n   <chr>     \n 1 Medium    \n 2 Heavy     \n 3 Heavy     \n 4 Medium    \n 5 Heavy     \n 6 Unarmored \n 7 Unarmored \n 8 Medium    \n 9 Heavy     \n10 Heavy     \n# ℹ 61 more rows\n```\n:::\n:::\n\n\n## `select()` - выбираем нужные колонки по названию или индексу\n\nМожно выбирать несколько колонок просто перечислением или выбрать несколько колонок с одной по другую с помощью двоеточия `:`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  select(unit, race, hp)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 71 × 3\n   unit           race     hp\n   <chr>          <chr> <dbl>\n 1 Peasant        Human   220\n 2 Militia        Human   220\n 3 Footman        Human   420\n 4 Rifleman       Human   535\n 5 Knight         Human   835\n 6 Priest         Human   290\n 7 Sorceress      Human   325\n 8 Spell Breaker  Human   600\n 9 Flying Machine Human   200\n10 Mortar Team    Human   360\n# ℹ 61 more rows\n```\n:::\n:::\n\n\n## `select()` - выбираем нужные колонки по названию или индексу {style=\"font-size: 90%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  select(unit:armor_type, ground_attack:range)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 71 × 12\n   unit   race   gold  wood   pop    hp armor_type ground_attack damage cooldown\n   <chr>  <chr> <dbl> <dbl> <dbl> <dbl> <chr>      <chr>          <dbl>    <dbl>\n 1 Peasa… Human    75     0     1   220 Medium     Normal           5.5     2   \n 2 Milit… Human    NA    NA     1   220 Heavy      Normal          12.5     1.2 \n 3 Footm… Human   135     0     2   420 Heavy      Normal          12.5     1.35\n 4 Rifle… Human   205    30     3   535 Medium     Pierce          21       1.5 \n 5 Knight Human   245    60     4   835 Heavy      Normal          34       1.4 \n 6 Priest Human   135    10     2   290 Unarmored  Magic            8.5     2   \n 7 Sorce… Human   155    20     2   325 Unarmored  Magic           11       1.75\n 8 Spell… Human   215    30     3   600 Medium     Normal          14       1.9 \n 9 Flyin… Human    90    30     1   200 Heavy      Siege            7.5     2.5 \n10 Morta… Human   180    70     3   360 Heavy      Siege           58       3.5 \n# ℹ 61 more rows\n# ℹ 2 more variables: dps <dbl>, range <dbl>\n```\n:::\n:::\n\n\n::: callout-note\nВыбор колонок без кавычек - [NSE](https://adv-r.hadley.nz/metaprogramming.html#metaprogramming) (not standard evaluation, выбор колонок с помощью двоеточия - концепция [`tidyselect`](https://r4ds.hadley.nz/functions.html#sec-embracing)).\n:::\n\n## `select()` + `pull()` для выбора одной колонки\n\nПри селекте одной колонки она не превращается в вектор по умолчанию, а остается датасетом с одной колонкой. Но иногда мы хотим извлечь именно вектор, а не маленький датасет. В таком случае понадобится функция `pull()`.\n\nСравните:\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  select(unit) %>% \n  head(5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 1\n  unit    \n  <chr>   \n1 Peasant \n2 Militia \n3 Footman \n4 Rifleman\n5 Knight  \n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  pull(unit) %>% \n  head(5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Peasant\"  \"Militia\"  \"Footman\"  \"Rifleman\" \"Knight\"  \n```\n:::\n:::\n\n:::\n:::\n\n------------------------------------------------------------------------\n\nВ base R можно задать сохранение размерности датафрейма аргументом `drop = FALSE` при индексации.\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nwc3_units %>% \n  select(unit) %>% \n  head(5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 1\n  unit    \n  <chr>   \n1 Peasant \n2 Militia \n3 Footman \n4 Rifleman\n5 Knight  \n```\n:::\n\n```{.r .cell-code}\n# тоже самое в base R с аргументом drop = FALSE\nwc3_units[1:5,1, drop = FALSE]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 1\n  unit    \n  <chr>   \n1 Peasant \n2 Militia \n3 Footman \n4 Rifleman\n5 Knight  \n```\n:::\n:::\n\n\n# Работа со строками\n\n## `filter()` - выбрать нужные строки по условию\n\nВыберем только юнитов ночных эльфов ('N.Elf')\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  filter(race == 'N.Elf')\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> unit </th>\n   <th style=\"text-align:left;\"> race </th>\n   <th style=\"text-align:right;\"> gold </th>\n   <th style=\"text-align:right;\"> wood </th>\n   <th style=\"text-align:right;\"> pop </th>\n   <th style=\"text-align:right;\"> hp </th>\n   <th style=\"text-align:left;\"> armor_type </th>\n   <th style=\"text-align:right;\"> armor </th>\n   <th style=\"text-align:right;\"> sight </th>\n   <th style=\"text-align:right;\"> speed </th>\n   <th style=\"text-align:right;\"> time </th>\n   <th style=\"text-align:left;\"> ground_attack </th>\n   <th style=\"text-align:right;\"> damage </th>\n   <th style=\"text-align:right;\"> cooldown </th>\n   <th style=\"text-align:right;\"> dps </th>\n   <th style=\"text-align:right;\"> range </th>\n   <th style=\"text-align:left;\"> air_attack </th>\n   <th style=\"text-align:right;\"> damage_2 </th>\n   <th style=\"text-align:right;\"> cooldown_2 </th>\n   <th style=\"text-align:right;\"> dps_2 </th>\n   <th style=\"text-align:right;\"> range_2 </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Wisp </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 60 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 100 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 14 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Archer </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 130 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 245 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 17.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 11.33 </td>\n   <td style=\"text-align:right;\"> 50 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 17.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 11.33 </td>\n   <td style=\"text-align:right;\"> 50 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Huntress </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 195 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 600 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 17.0 </td>\n   <td style=\"text-align:right;\"> 1.80 </td>\n   <td style=\"text-align:right;\"> 9.44 </td>\n   <td style=\"text-align:right;\"> 22 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Glaive Thrower </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 210 </td>\n   <td style=\"text-align:right;\"> 65 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> 48 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 44.5 </td>\n   <td style=\"text-align:right;\"> 3.50 </td>\n   <td style=\"text-align:right;\"> 12.71 </td>\n   <td style=\"text-align:right;\"> 115 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Dryad </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 145 </td>\n   <td style=\"text-align:right;\"> 60 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 435 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 18.0 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 9.00 </td>\n   <td style=\"text-align:right;\"> 50 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 18.0 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 9.00 </td>\n   <td style=\"text-align:right;\"> 50 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> DoC Druid Form </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 255 </td>\n   <td style=\"text-align:right;\"> 80 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 130 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 35 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 20.5 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 13.67 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> DoC Bear Form </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 960 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 36.5 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 24.33 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Mountain Giant </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 425 </td>\n   <td style=\"text-align:right;\"> 100 </td>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 1600 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 34.0 </td>\n   <td style=\"text-align:right;\"> 2.50 </td>\n   <td style=\"text-align:right;\"> 13.60 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Mountain Giant 2 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 425 </td>\n   <td style=\"text-align:right;\"> 100 </td>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 1600 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 41.0 </td>\n   <td style=\"text-align:right;\"> 2.50 </td>\n   <td style=\"text-align:right;\"> 16.40 </td>\n   <td style=\"text-align:right;\"> 25 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Hippogryph </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 525 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 53.5 </td>\n   <td style=\"text-align:right;\"> 1.05 </td>\n   <td style=\"text-align:right;\"> 50.95 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> DoT Druid Form </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 135 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 22 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 12.0 </td>\n   <td style=\"text-align:right;\"> 1.60 </td>\n   <td style=\"text-align:right;\"> 7.50 </td>\n   <td style=\"text-align:right;\"> 60 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 12.0 </td>\n   <td style=\"text-align:right;\"> 1.60 </td>\n   <td style=\"text-align:right;\"> 7.50 </td>\n   <td style=\"text-align:right;\"> 60 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> DoT Crow Form </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 320 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 60 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 38.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 21.71 </td>\n   <td style=\"text-align:right;\"> 60 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Faerie Dragon </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 155 </td>\n   <td style=\"text-align:right;\"> 25 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 450 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> 25 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 15.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 8.57 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 15.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 8.57 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Hippogryph Rider </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 765 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 17.0 </td>\n   <td style=\"text-align:right;\"> 1.10 </td>\n   <td style=\"text-align:right;\"> 15.45 </td>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 17.0 </td>\n   <td style=\"text-align:right;\"> 1.10 </td>\n   <td style=\"text-align:right;\"> 15.45 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Chimaera </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 330 </td>\n   <td style=\"text-align:right;\"> 70 </td>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 1000 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 250 </td>\n   <td style=\"text-align:right;\"> 65 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 75.0 </td>\n   <td style=\"text-align:right;\"> 2.50 </td>\n   <td style=\"text-align:right;\"> 30.00 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Chimaera 2 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 330 </td>\n   <td style=\"text-align:right;\"> 70 </td>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 1000 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 250 </td>\n   <td style=\"text-align:right;\"> 65 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:right;\"> 2.50 </td>\n   <td style=\"text-align:right;\"> 20.00 </td>\n   <td style=\"text-align:right;\"> 85 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Treant </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 16.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 9.14 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Avatar of Vengeance </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 1200 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 320 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 30.5 </td>\n   <td style=\"text-align:right;\"> 1.35 </td>\n   <td style=\"text-align:right;\"> 22.59 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 30.5 </td>\n   <td style=\"text-align:right;\"> 1.35 </td>\n   <td style=\"text-align:right;\"> 22.59 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Spirit of Vengeance </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> Invulnerable </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 16.0 </td>\n   <td style=\"text-align:right;\"> 1.35 </td>\n   <td style=\"text-align:right;\"> 11.85 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 16.0 </td>\n   <td style=\"text-align:right;\"> 1.35 </td>\n   <td style=\"text-align:right;\"> 11.85 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## `filter()` - выбрать нужные строки по условию {.smaller}\n\nМожно комбинировать несколько условий, используя логическое И (`&`), ИЛИ (`|`). Например, выберем только юнитов ночных эльфов, показатель урона (damage) которых больше 40:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  filter(race == 'N.Elf' & damage > 40)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> unit </th>\n   <th style=\"text-align:left;\"> race </th>\n   <th style=\"text-align:right;\"> gold </th>\n   <th style=\"text-align:right;\"> wood </th>\n   <th style=\"text-align:right;\"> pop </th>\n   <th style=\"text-align:right;\"> hp </th>\n   <th style=\"text-align:left;\"> armor_type </th>\n   <th style=\"text-align:right;\"> armor </th>\n   <th style=\"text-align:right;\"> sight </th>\n   <th style=\"text-align:right;\"> speed </th>\n   <th style=\"text-align:right;\"> time </th>\n   <th style=\"text-align:left;\"> ground_attack </th>\n   <th style=\"text-align:right;\"> damage </th>\n   <th style=\"text-align:right;\"> cooldown </th>\n   <th style=\"text-align:right;\"> dps </th>\n   <th style=\"text-align:right;\"> range </th>\n   <th style=\"text-align:left;\"> air_attack </th>\n   <th style=\"text-align:right;\"> damage_2 </th>\n   <th style=\"text-align:right;\"> cooldown_2 </th>\n   <th style=\"text-align:right;\"> dps_2 </th>\n   <th style=\"text-align:right;\"> range_2 </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Glaive Thrower </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 210 </td>\n   <td style=\"text-align:right;\"> 65 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> 48 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 44.5 </td>\n   <td style=\"text-align:right;\"> 3.5 </td>\n   <td style=\"text-align:right;\"> 12.71 </td>\n   <td style=\"text-align:right;\"> 115 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Mountain Giant 2 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 425 </td>\n   <td style=\"text-align:right;\"> 100 </td>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 1600 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 41.0 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 16.40 </td>\n   <td style=\"text-align:right;\"> 25 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Chimaera </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 330 </td>\n   <td style=\"text-align:right;\"> 70 </td>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 1000 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 250 </td>\n   <td style=\"text-align:right;\"> 65 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 75.0 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 30.00 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Chimaera 2 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 330 </td>\n   <td style=\"text-align:right;\"> 70 </td>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 1000 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 250 </td>\n   <td style=\"text-align:right;\"> 65 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 20.00 </td>\n   <td style=\"text-align:right;\"> 85 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## `slice()` - выбираем строки по индексу\n\n`slice()` - вывести строки в опреденном диапазоне (используя просто индексы строк)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  slice(10:15)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 21\n  unit          race   gold  wood   pop    hp armor_type armor sight speed  time\n  <chr>         <chr> <dbl> <dbl> <dbl> <dbl> <chr>      <dbl> <dbl> <dbl> <dbl>\n1 Mortar Team   Human   180    70     3   360 Heavy          0   140   270    40\n2 Siege Engine  Human   195    60     3   700 Fort           2   140   220    55\n3 Gryphon Rider Human   280    70     4   825 Light          0   160   320    45\n4 Dragonhawk R… Human   200    30     3   575 Light          1   140   350    28\n5 Water Elemen… Human    NA    NA    NA   525 Heavy          0   120   220    NA\n6 Water Elemen… Human    NA    NA    NA   675 Heavy          1   120   220    NA\n# ℹ 10 more variables: ground_attack <chr>, damage <dbl>, cooldown <dbl>,\n#   dps <dbl>, range <dbl>, air_attack <chr>, damage_2 <dbl>, cooldown_2 <dbl>,\n#   dps_2 <dbl>, range_2 <dbl>\n```\n:::\n:::\n\n\n## `slice_max()`, `slice_min()`\n\n::: columns\n::: {.column width=\"50%\"}\n`slice_max()` - вывести максимальные значения по какому-то признаку\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  slice_max(wood, n = 5) %>% # важно эксплицитно писать параметр n = \n  select(unit, race, wood)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 3\n  unit             race    wood\n  <chr>            <chr>  <dbl>\n1 Frost Wyrm       Undead   120\n2 Mountain Giant   N.Elf    100\n3 Mountain Giant 2 N.Elf    100\n4 Tauren           Orc       80\n5 DoC Druid Form   N.Elf     80\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n`slice_min()` - вывести минимальные значения по какому-то признаку\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  slice_min(hp, n = 5) %>% \n  select(unit, race, hp)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 3\n  unit             race      hp\n  <chr>            <chr>  <dbl>\n1 Serpent Ward     Orc       75\n2 Wisp             N.Elf    120\n3 Shade            Undead   125\n4 DoC Druid Form   N.Elf    130\n5 Carrion Beetle 1 Undead   140\n```\n:::\n:::\n\n:::\n:::\n\nФункции `slice_max/slice_min()` сортируют выдачу, в отличие от теперь устаревшей `top_n()`.\n\n## `slice_sample()` - вывести случайные строки\n\nВ функции `slice_sample()` нужен аргумент `n`, обозначающий количество строк для печати.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  slice_sample(n = 6)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 21\n  unit          race   gold  wood   pop    hp armor_type armor sight speed  time\n  <chr>         <chr> <dbl> <dbl> <dbl> <dbl> <chr>      <dbl> <dbl> <dbl> <dbl>\n1 Priest        Human   135    10     2   290 Unarmored      0   140   270    28\n2 T. Berserker  Orc     135    20     2   450 Medium         0   140   270    22\n3 Shade         Unde…    NA    NA     1   125 Medium         0   190   350    15\n4 DoT Druid Fo… N.Elf   135    20     2   300 Unarmored      0   140   270    22\n5 Tauren        Orc     280    80     5  1300 Heavy          3   140   270    44\n6 Crypt Fiend   Unde…   215    40     3   550 Medium         0   140   270    30\n# ℹ 10 more variables: ground_attack <chr>, damage <dbl>, cooldown <dbl>,\n#   dps <dbl>, range <dbl>, air_attack <chr>, damage_2 <dbl>, cooldown_2 <dbl>,\n#   dps_2 <dbl>, range_2 <dbl>\n```\n:::\n:::\n\n\nПолезно, чтобы посмотреть часть датафрейма.\n\n## select/filter\n\nМнемоническое правило, чтобы не забыть, к чему относится select и filter\n\nSele**C**t - **C**olumn\n\nFilte**R** - **R**ow\n\n![](figures/select_vs_filter.png){width=\"3000\"}\n\n# Изменение колонок\n\n## `mutate()` - создать новую колонку или изменить существующую\n\nМожно просто составить новую колонку из предыдущих, используя синтаксис `mutate(column_name = <expression>).`\n\nПроверим, что dps (damage per second) = damage / cooldown\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nwc3_units %>% \n  mutate(damage_per_second = damage / cooldown) %>% \n  select(unit, damage, cooldown, damage_per_second, dps)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 71 × 5\n   unit           damage cooldown damage_per_second   dps\n   <chr>           <dbl>    <dbl>             <dbl> <dbl>\n 1 Peasant           5.5     2                 2.75  2.75\n 2 Militia          12.5     1.2              10.4  10.4 \n 3 Footman          12.5     1.35              9.26  9.26\n 4 Rifleman         21       1.5              14    14   \n 5 Knight           34       1.4              24.3  24.3 \n 6 Priest            8.5     2                 4.25  4.25\n 7 Sorceress        11       1.75              6.29  6.29\n 8 Spell Breaker    14       1.9               7.37  7.37\n 9 Flying Machine    7.5     2.5               3     3   \n10 Mortar Team      58       3.5              16.6  16.6 \n# ℹ 61 more rows\n```\n:::\n:::\n\n\n::: callout-tip\nТакая операция легко делается и в базовом R, например\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units$damage_per_second <- wc3_units$damage / wc3_units$cooldown\n```\n:::\n\n:::\n\n## `mutate()` - создать новую колонку или изменить существующую\n\nУзнаем показатель отношения dps / на число пищи, чтобы узнать какие юниты самые эффективные.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndps_food <- wc3_units %>% \n  mutate(dps_food_ratio = dps / pop) %>% \n  relocate(dps_food_ratio, .after = unit)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped\" style=\"font-size: 28px; width: auto !important; \">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> unit </th>\n   <th style=\"text-align:right;\"> dps_food_ratio </th>\n   <th style=\"text-align:left;\"> race </th>\n   <th style=\"text-align:right;\"> gold </th>\n   <th style=\"text-align:right;\"> wood </th>\n   <th style=\"text-align:right;\"> pop </th>\n   <th style=\"text-align:right;\"> hp </th>\n   <th style=\"text-align:left;\"> armor_type </th>\n   <th style=\"text-align:right;\"> armor </th>\n   <th style=\"text-align:right;\"> sight </th>\n   <th style=\"text-align:right;\"> speed </th>\n   <th style=\"text-align:right;\"> time </th>\n   <th style=\"text-align:left;\"> ground_attack </th>\n   <th style=\"text-align:right;\"> damage </th>\n   <th style=\"text-align:right;\"> cooldown </th>\n   <th style=\"text-align:right;\"> dps </th>\n   <th style=\"text-align:right;\"> range </th>\n   <th style=\"text-align:left;\"> air_attack </th>\n   <th style=\"text-align:right;\"> damage_2 </th>\n   <th style=\"text-align:right;\"> cooldown_2 </th>\n   <th style=\"text-align:right;\"> dps_2 </th>\n   <th style=\"text-align:right;\"> range_2 </th>\n   <th style=\"text-align:right;\"> damage_per_second </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Peasant </td>\n   <td style=\"text-align:right;\"> 2.750000 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 75 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 80 </td>\n   <td style=\"text-align:right;\"> 190 </td>\n   <td style=\"text-align:right;\"> 15 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 5.5 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 2.75 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 2.750000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Militia </td>\n   <td style=\"text-align:right;\"> 10.420000 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 12.5 </td>\n   <td style=\"text-align:right;\"> 1.20 </td>\n   <td style=\"text-align:right;\"> 10.42 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 10.416667 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Footman </td>\n   <td style=\"text-align:right;\"> 4.630000 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 135 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 420 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 12.5 </td>\n   <td style=\"text-align:right;\"> 1.35 </td>\n   <td style=\"text-align:right;\"> 9.26 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 9.259259 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Rifleman </td>\n   <td style=\"text-align:right;\"> 4.666667 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 205 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 535 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 26 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 21.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 14.00 </td>\n   <td style=\"text-align:right;\"> 40.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 21.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 14.00 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:right;\"> 14.000000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Knight </td>\n   <td style=\"text-align:right;\"> 6.072500 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 245 </td>\n   <td style=\"text-align:right;\"> 60 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 835 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 34.0 </td>\n   <td style=\"text-align:right;\"> 1.40 </td>\n   <td style=\"text-align:right;\"> 24.29 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 24.285714 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Priest </td>\n   <td style=\"text-align:right;\"> 2.125000 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 135 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 290 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 28 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 8.5 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 4.25 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 8.5 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 4.25 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:right;\"> 4.250000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Sorceress </td>\n   <td style=\"text-align:right;\"> 3.145000 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 155 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 325 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 11.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 6.29 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 11.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 6.29 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:right;\"> 6.285714 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Spell Breaker </td>\n   <td style=\"text-align:right;\"> 2.456667 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 215 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 600 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:right;\"> 28 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 14.0 </td>\n   <td style=\"text-align:right;\"> 1.90 </td>\n   <td style=\"text-align:right;\"> 7.37 </td>\n   <td style=\"text-align:right;\"> 25.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 7.368421 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Flying Machine </td>\n   <td style=\"text-align:right;\"> 3.000000 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 90 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 180 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:right;\"> 13 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 7.5 </td>\n   <td style=\"text-align:right;\"> 2.50 </td>\n   <td style=\"text-align:right;\"> 3.00 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 14.5 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 7.25 </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:right;\"> 3.000000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Mortar Team </td>\n   <td style=\"text-align:right;\"> 5.523333 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 180 </td>\n   <td style=\"text-align:right;\"> 70 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 360 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 58.0 </td>\n   <td style=\"text-align:right;\"> 3.50 </td>\n   <td style=\"text-align:right;\"> 16.57 </td>\n   <td style=\"text-align:right;\"> 115.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 16.571429 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Siege Engine </td>\n   <td style=\"text-align:right;\"> 7.936667 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 195 </td>\n   <td style=\"text-align:right;\"> 60 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 700 </td>\n   <td style=\"text-align:left;\"> Fort </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> 55 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:right;\"> 2.10 </td>\n   <td style=\"text-align:right;\"> 23.81 </td>\n   <td style=\"text-align:right;\"> 19.0 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 13.5 </td>\n   <td style=\"text-align:right;\"> 2.10 </td>\n   <td style=\"text-align:right;\"> 6.43 </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:right;\"> 23.809524 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Gryphon Rider </td>\n   <td style=\"text-align:right;\"> 5.682500 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 280 </td>\n   <td style=\"text-align:right;\"> 70 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 825 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 320 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:right;\"> 2.20 </td>\n   <td style=\"text-align:right;\"> 22.73 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:right;\"> 2.40 </td>\n   <td style=\"text-align:right;\"> 20.83 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:right;\"> 22.727273 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Dragonhawk Rider </td>\n   <td style=\"text-align:right;\"> 3.620000 </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 575 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> 28 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 19.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 10.86 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 19.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 10.86 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:right;\"> 10.857143 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Water Elemental 1 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 525 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 20.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 13.33 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 20.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 13.33 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:right;\"> 13.333333 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Water Elemental 2 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 675 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 35.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 23.33 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 35.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 23.33 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:right;\"> 23.333333 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Water Elemental 3 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 900 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 30.00 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 30.00 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:right;\"> 30.000000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Phoenix </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 1250 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 320 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 68.0 </td>\n   <td style=\"text-align:right;\"> 1.40 </td>\n   <td style=\"text-align:right;\"> 48.57 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 68.0 </td>\n   <td style=\"text-align:right;\"> 1.40 </td>\n   <td style=\"text-align:right;\"> 48.57 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:right;\"> 48.571429 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Peon </td>\n   <td style=\"text-align:right;\"> 2.500000 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 75 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 250 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 80 </td>\n   <td style=\"text-align:right;\"> 190 </td>\n   <td style=\"text-align:right;\"> 15 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 7.5 </td>\n   <td style=\"text-align:right;\"> 3.00 </td>\n   <td style=\"text-align:right;\"> 2.50 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 2.500000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Grunt </td>\n   <td style=\"text-align:right;\"> 4.063333 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 700 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 19.5 </td>\n   <td style=\"text-align:right;\"> 1.60 </td>\n   <td style=\"text-align:right;\"> 12.19 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 12.187500 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> T. Headhunter </td>\n   <td style=\"text-align:right;\"> 5.410000 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 135 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 25.0 </td>\n   <td style=\"text-align:right;\"> 2.31 </td>\n   <td style=\"text-align:right;\"> 10.82 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 25.0 </td>\n   <td style=\"text-align:right;\"> 2.31 </td>\n   <td style=\"text-align:right;\"> 10.82 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:right;\"> 10.822511 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> T. Berserker </td>\n   <td style=\"text-align:right;\"> 5.410000 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 135 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 450 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 22 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 25.0 </td>\n   <td style=\"text-align:right;\"> 2.31 </td>\n   <td style=\"text-align:right;\"> 10.82 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 25.0 </td>\n   <td style=\"text-align:right;\"> 2.31 </td>\n   <td style=\"text-align:right;\"> 10.82 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:right;\"> 10.822511 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Demolisher </td>\n   <td style=\"text-align:right;\"> 4.472500 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> 50 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 425 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 80.5 </td>\n   <td style=\"text-align:right;\"> 4.50 </td>\n   <td style=\"text-align:right;\"> 17.89 </td>\n   <td style=\"text-align:right;\"> 115.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 17.888889 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Raider </td>\n   <td style=\"text-align:right;\"> 4.503333 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 180 </td>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 610 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> 28 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 25.0 </td>\n   <td style=\"text-align:right;\"> 1.85 </td>\n   <td style=\"text-align:right;\"> 13.51 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 13.513514 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Tauren </td>\n   <td style=\"text-align:right;\"> 3.474000 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 280 </td>\n   <td style=\"text-align:right;\"> 80 </td>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 1300 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 44 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 33.0 </td>\n   <td style=\"text-align:right;\"> 1.90 </td>\n   <td style=\"text-align:right;\"> 17.37 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 17.368421 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Shaman </td>\n   <td style=\"text-align:right;\"> 2.025000 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 130 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 335 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 8.5 </td>\n   <td style=\"text-align:right;\"> 2.10 </td>\n   <td style=\"text-align:right;\"> 4.05 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 8.5 </td>\n   <td style=\"text-align:right;\"> 2.10 </td>\n   <td style=\"text-align:right;\"> 4.05 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:right;\"> 4.047619 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Witch Doctor </td>\n   <td style=\"text-align:right;\"> 3.430000 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 145 </td>\n   <td style=\"text-align:right;\"> 25 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 315 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 12.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 6.86 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 12.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 6.86 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:right;\"> 6.857143 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Spirit Walker </td>\n   <td style=\"text-align:right;\"> 3.713333 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 195 </td>\n   <td style=\"text-align:right;\"> 35 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 38 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 19.5 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 11.14 </td>\n   <td style=\"text-align:right;\"> 40.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 19.5 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 11.14 </td>\n   <td style=\"text-align:right;\"> 40.0 </td>\n   <td style=\"text-align:right;\"> 11.142857 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Kodo Beast </td>\n   <td style=\"text-align:right;\"> 3.125000 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 255 </td>\n   <td style=\"text-align:right;\"> 60 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 1000 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 18.0 </td>\n   <td style=\"text-align:right;\"> 1.44 </td>\n   <td style=\"text-align:right;\"> 12.50 </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 18.0 </td>\n   <td style=\"text-align:right;\"> 1.44 </td>\n   <td style=\"text-align:right;\"> 12.50 </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:right;\"> 12.500000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Wind Rider </td>\n   <td style=\"text-align:right;\"> 5.000000 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 265 </td>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 570 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 320 </td>\n   <td style=\"text-align:right;\"> 35 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 40.0 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 20.00 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 40.0 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 20.00 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:right;\"> 20.000000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Troll Batrider </td>\n   <td style=\"text-align:right;\"> 3.890000 </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 325 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 320 </td>\n   <td style=\"text-align:right;\"> 28 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 14.0 </td>\n   <td style=\"text-align:right;\"> 1.80 </td>\n   <td style=\"text-align:right;\"> 7.78 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 7.777778 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Spirit Wolf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 320 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 11.5 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 11.50 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 11.500000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Dire Wolf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 16.5 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 16.50 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 16.500000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Shadow Wolf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 21.5 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 21.50 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 21.500000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Serpent Ward </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 75 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 12.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 8.00 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 12.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 8.00 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:right;\"> 8.000000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Wisp </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 60 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 100 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 14 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Archer </td>\n   <td style=\"text-align:right;\"> 5.665000 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 130 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 245 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 17.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 11.33 </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 17.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 11.33 </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:right;\"> 11.333333 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Huntress </td>\n   <td style=\"text-align:right;\"> 3.146667 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 195 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 600 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 17.0 </td>\n   <td style=\"text-align:right;\"> 1.80 </td>\n   <td style=\"text-align:right;\"> 9.44 </td>\n   <td style=\"text-align:right;\"> 22.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 9.444444 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Glaive Thrower </td>\n   <td style=\"text-align:right;\"> 4.236667 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 210 </td>\n   <td style=\"text-align:right;\"> 65 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> 48 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 44.5 </td>\n   <td style=\"text-align:right;\"> 3.50 </td>\n   <td style=\"text-align:right;\"> 12.71 </td>\n   <td style=\"text-align:right;\"> 115.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 12.714286 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Dryad </td>\n   <td style=\"text-align:right;\"> 3.000000 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 145 </td>\n   <td style=\"text-align:right;\"> 60 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 435 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 18.0 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 9.00 </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 18.0 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 9.00 </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:right;\"> 9.000000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> DoC Druid Form </td>\n   <td style=\"text-align:right;\"> 3.417500 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 255 </td>\n   <td style=\"text-align:right;\"> 80 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 130 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 35 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 20.5 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 13.67 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 13.666667 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> DoC Bear Form </td>\n   <td style=\"text-align:right;\"> 6.082500 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 960 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 36.5 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 24.33 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 24.333333 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Mountain Giant </td>\n   <td style=\"text-align:right;\"> 1.942857 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 425 </td>\n   <td style=\"text-align:right;\"> 100 </td>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 1600 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 34.0 </td>\n   <td style=\"text-align:right;\"> 2.50 </td>\n   <td style=\"text-align:right;\"> 13.60 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 13.600000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Mountain Giant 2 </td>\n   <td style=\"text-align:right;\"> 2.342857 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 425 </td>\n   <td style=\"text-align:right;\"> 100 </td>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 1600 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 41.0 </td>\n   <td style=\"text-align:right;\"> 2.50 </td>\n   <td style=\"text-align:right;\"> 16.40 </td>\n   <td style=\"text-align:right;\"> 25.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 16.400000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Hippogryph </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 525 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 53.5 </td>\n   <td style=\"text-align:right;\"> 1.05 </td>\n   <td style=\"text-align:right;\"> 50.95 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> DoT Druid Form </td>\n   <td style=\"text-align:right;\"> 3.750000 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 135 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 22 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 12.0 </td>\n   <td style=\"text-align:right;\"> 1.60 </td>\n   <td style=\"text-align:right;\"> 7.50 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 12.0 </td>\n   <td style=\"text-align:right;\"> 1.60 </td>\n   <td style=\"text-align:right;\"> 7.50 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:right;\"> 7.500000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> DoT Crow Form </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 320 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 38.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 21.71 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Faerie Dragon </td>\n   <td style=\"text-align:right;\"> 4.285000 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 155 </td>\n   <td style=\"text-align:right;\"> 25 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 450 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> 25 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 15.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 8.57 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 15.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 8.57 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:right;\"> 8.571429 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Hippogryph Rider </td>\n   <td style=\"text-align:right;\"> 3.862500 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 765 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 17.0 </td>\n   <td style=\"text-align:right;\"> 1.10 </td>\n   <td style=\"text-align:right;\"> 15.45 </td>\n   <td style=\"text-align:right;\"> 40.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 17.0 </td>\n   <td style=\"text-align:right;\"> 1.10 </td>\n   <td style=\"text-align:right;\"> 15.45 </td>\n   <td style=\"text-align:right;\"> 10.0 </td>\n   <td style=\"text-align:right;\"> 15.454546 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Chimaera </td>\n   <td style=\"text-align:right;\"> 6.000000 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 330 </td>\n   <td style=\"text-align:right;\"> 70 </td>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 1000 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 250 </td>\n   <td style=\"text-align:right;\"> 65 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 75.0 </td>\n   <td style=\"text-align:right;\"> 2.50 </td>\n   <td style=\"text-align:right;\"> 30.00 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 30.000000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Chimaera 2 </td>\n   <td style=\"text-align:right;\"> 4.000000 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 330 </td>\n   <td style=\"text-align:right;\"> 70 </td>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 1000 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 250 </td>\n   <td style=\"text-align:right;\"> 65 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:right;\"> 2.50 </td>\n   <td style=\"text-align:right;\"> 20.00 </td>\n   <td style=\"text-align:right;\"> 85.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 20.000000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Treant </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 16.0 </td>\n   <td style=\"text-align:right;\"> 1.75 </td>\n   <td style=\"text-align:right;\"> 9.14 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 9.142857 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Avatar of Vengeance </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 1200 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 320 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 30.5 </td>\n   <td style=\"text-align:right;\"> 1.35 </td>\n   <td style=\"text-align:right;\"> 22.59 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 30.5 </td>\n   <td style=\"text-align:right;\"> 1.35 </td>\n   <td style=\"text-align:right;\"> 22.59 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:right;\"> 22.592593 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Spirit of Vengeance </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> Invulnerable </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 16.0 </td>\n   <td style=\"text-align:right;\"> 1.35 </td>\n   <td style=\"text-align:right;\"> 11.85 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 16.0 </td>\n   <td style=\"text-align:right;\"> 1.35 </td>\n   <td style=\"text-align:right;\"> 11.85 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:right;\"> 11.851852 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Acolyte </td>\n   <td style=\"text-align:right;\"> 3.800000 </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> 75 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 80 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> 15 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 9.5 </td>\n   <td style=\"text-align:right;\"> 2.50 </td>\n   <td style=\"text-align:right;\"> 3.80 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 3.800000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Ghoul </td>\n   <td style=\"text-align:right;\"> 5.000000 </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 340 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 18 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 13.0 </td>\n   <td style=\"text-align:right;\"> 1.30 </td>\n   <td style=\"text-align:right;\"> 10.00 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 10.000000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Crypt Fiend </td>\n   <td style=\"text-align:right;\"> 4.750000 </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> 215 </td>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 550 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 28.5 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 14.25 </td>\n   <td style=\"text-align:right;\"> 55.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 14.250000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Gargoyle </td>\n   <td style=\"text-align:right;\"> 4.430000 </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> 185 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 410 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> 35 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 19.5 </td>\n   <td style=\"text-align:right;\"> 2.20 </td>\n   <td style=\"text-align:right;\"> 8.86 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 65.5 </td>\n   <td style=\"text-align:right;\"> 1.40 </td>\n   <td style=\"text-align:right;\"> 46.79 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 8.863636 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Abomination </td>\n   <td style=\"text-align:right;\"> 4.737500 </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> 240 </td>\n   <td style=\"text-align:right;\"> 70 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 1175 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 36.0 </td>\n   <td style=\"text-align:right;\"> 1.90 </td>\n   <td style=\"text-align:right;\"> 18.95 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 18.947368 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Meat Wagon </td>\n   <td style=\"text-align:right;\"> 4.970000 </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> 230 </td>\n   <td style=\"text-align:right;\"> 50 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 380 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 79.5 </td>\n   <td style=\"text-align:right;\"> 4.00 </td>\n   <td style=\"text-align:right;\"> 19.88 </td>\n   <td style=\"text-align:right;\"> 115.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 19.875000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Necromancer </td>\n   <td style=\"text-align:right;\"> 2.360000 </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> 145 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 305 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 24 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 8.5 </td>\n   <td style=\"text-align:right;\"> 1.80 </td>\n   <td style=\"text-align:right;\"> 4.72 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 8.5 </td>\n   <td style=\"text-align:right;\"> 1.80 </td>\n   <td style=\"text-align:right;\"> 4.72 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:right;\"> 4.722222 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Banshee </td>\n   <td style=\"text-align:right;\"> 3.665000 </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> 155 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 285 </td>\n   <td style=\"text-align:left;\"> Unarmored </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 28 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 11.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 7.33 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 11.0 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 7.33 </td>\n   <td style=\"text-align:right;\"> 60.0 </td>\n   <td style=\"text-align:right;\"> 7.333333 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Frost Wyrm </td>\n   <td style=\"text-align:right;\"> 4.952857 </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> 385 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 1350 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 65 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 104.0 </td>\n   <td style=\"text-align:right;\"> 3.00 </td>\n   <td style=\"text-align:right;\"> 34.67 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 89.0 </td>\n   <td style=\"text-align:right;\"> 3.00 </td>\n   <td style=\"text-align:right;\"> 29.67 </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:right;\"> 34.666667 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Shade </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 125 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 190 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:right;\"> 15 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Skeleton Warrior </td>\n   <td style=\"text-align:right;\"> Inf </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 180 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 80 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 14.5 </td>\n   <td style=\"text-align:right;\"> 2.00 </td>\n   <td style=\"text-align:right;\"> 7.25 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 7.250000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Skeletal Mage </td>\n   <td style=\"text-align:right;\"> Inf </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 230 </td>\n   <td style=\"text-align:left;\"> Medium </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 11.5 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 7.67 </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:left;\"> Pierce </td>\n   <td style=\"text-align:right;\"> 11.5 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 7.67 </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n   <td style=\"text-align:right;\"> 7.666667 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Infernal </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 1500 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 320 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Chaos </td>\n   <td style=\"text-align:right;\"> 54.5 </td>\n   <td style=\"text-align:right;\"> 1.35 </td>\n   <td style=\"text-align:right;\"> 40.37 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 40.370370 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Carrion Beetle 1 </td>\n   <td style=\"text-align:right;\"> Inf </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 8.5 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 5.67 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 5.666667 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Carrion Beetle 2 </td>\n   <td style=\"text-align:right;\"> Inf </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 275 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 16.5 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 11.00 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 11.000000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Carrion Beetle 3 </td>\n   <td style=\"text-align:right;\"> Inf </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 410 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Normal </td>\n   <td style=\"text-align:right;\"> 24.5 </td>\n   <td style=\"text-align:right;\"> 1.50 </td>\n   <td style=\"text-align:right;\"> 16.33 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 16.333333 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Obsidian Statue </td>\n   <td style=\"text-align:right;\"> 1.190000 </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:right;\"> 35 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 550 </td>\n   <td style=\"text-align:left;\"> Heavy </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 270 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 7.5 </td>\n   <td style=\"text-align:right;\"> 2.10 </td>\n   <td style=\"text-align:right;\"> 3.57 </td>\n   <td style=\"text-align:right;\"> 57.5 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 7.5 </td>\n   <td style=\"text-align:right;\"> 2.10 </td>\n   <td style=\"text-align:right;\"> 3.57 </td>\n   <td style=\"text-align:right;\"> 57.5 </td>\n   <td style=\"text-align:right;\"> 3.571429 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Destroyer </td>\n   <td style=\"text-align:right;\"> 2.962000 </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 900 </td>\n   <td style=\"text-align:left;\"> Light </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 140 </td>\n   <td style=\"text-align:right;\"> 320 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 20.0 </td>\n   <td style=\"text-align:right;\"> 1.35 </td>\n   <td style=\"text-align:right;\"> 14.81 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 20.0 </td>\n   <td style=\"text-align:right;\"> 1.35 </td>\n   <td style=\"text-align:right;\"> 14.81 </td>\n   <td style=\"text-align:right;\"> 45.0 </td>\n   <td style=\"text-align:right;\"> 14.814815 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## `mutate()` с условием\n\nЧасто нужно заполнить новую колонку определенными значениями в зависимости от условия.\n\nДопустим, мы хотим разделить юнитов по принципу, являются ли они призванными (число пищи `pop` равно `0` или `NA`).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1) # для воспроизводимости семплирования 5 строчек\nwc3_units_summon <- wc3_units %>% \n  mutate(is_summon = (pop == 0) | is.na(pop)) %>% \n  select(unit, race, pop, is_summon) %>% slice_sample(n = 5)\n```\n:::\n\n::: {.cell layout-align=\"left\"}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped\" style=\"font-size: 28px; width: auto !important; \">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> unit </th>\n   <th style=\"text-align:left;\"> race </th>\n   <th style=\"text-align:right;\"> pop </th>\n   <th style=\"text-align:left;\"> is_summon </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Carrion Beetle 2 </td>\n   <td style=\"text-align:left;\"> Undead </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:left;\"> TRUE </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Dryad </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> FALSE </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Peasant </td>\n   <td style=\"text-align:left;\"> Human </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> FALSE </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Serpent Ward </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> TRUE </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Mountain Giant 2 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:left;\"> FALSE </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## `mutate()` с условием для существующей колонки\n\nНапример, мы хотим переименовать N.Elf в NightElfes. Для этого пригодится функция `str_replace()` из библиотеки `stringr`, которая является аналогом базовой функции `gsub()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  mutate(race = str_replace(race, 'N.Elf', 'NightElfes')) %>% \n  slice_sample(n = 8) %>% \n  select(unit:pop)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 5\n  unit              race        gold  wood   pop\n  <chr>             <chr>      <dbl> <dbl> <dbl>\n1 Water Elemental 1 Human         NA    NA    NA\n2 Meat Wagon        Undead       230    50     4\n3 Treant            NightElfes    NA    NA    NA\n4 T. Berserker      Orc          135    20     2\n5 Acolyte           Undead        75     0     1\n6 Sorceress         Human        155    20     2\n7 Huntress          NightElfes   195    20     3\n8 DoC Bear Form     NightElfes    NA    NA     4\n```\n:::\n:::\n\n\n## `mutate()` + `if_else()`\n\nВ качестве примера `if_else()` проверка, является ли число положительным или отрицательным. Вспомним материал второй лекции.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnumber <- c(-3, -1, 0, 2, 5)\nif_else(number > 0, 'Положительное число', \n        'Отрицательное число или ноль')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Отрицательное число или ноль\" \"Отрицательное число или ноль\"\n[3] \"Отрицательное число или ноль\" \"Положительное число\"         \n[5] \"Положительное число\"         \n```\n:::\n:::\n\n\nСинтаксис `if_else`: `(<условие>, выражение если TRUE, выражение если FALSE)`.\n\n::: callout-note\nФункция `if()` в R является невекторизованной, то есть с помощью `if()` можно сравнивать только одно значение, а не целый вектор.\n:::\n\n## `mutate()` + `if_else()`\n\nПопробуем создать колонку, заполненную значениями, являются ли юниты призванными (до этого мы просто заполнили `TRUE`, `FALSE`, теперь хотим заполнить текстовым описанием).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units_summon_ifelse <- wc3_units %>% \n  mutate(if_summon = if_else((pop == 0) | is.na(pop), \n                            'Призванные', 'Непризванные'))\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> unit </th>\n   <th style=\"text-align:left;\"> race </th>\n   <th style=\"text-align:right;\"> pop </th>\n   <th style=\"text-align:left;\"> if_summon </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Huntress </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> Непризванные </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Serpent Ward </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Призванные </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Hippogryph </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> Непризванные </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Shadow Wolf </td>\n   <td style=\"text-align:left;\"> Orc </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:left;\"> Призванные </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Wisp </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> Непризванные </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## `mutate()` с условием + `case_when()`\n\nЕсли нужно использовать более чем 1 условие, то рекомендую воспользоваться функцией `case_when()` из библиотеки `dplyr`.\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndplyr::case_when(\n  number > 0 ~ \"Положительное число\",\n  number < 0 ~ \"Отрицательное число\",\n  number == 0 ~ \"Ноль\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Отрицательное число\" \"Отрицательное число\" \"Ноль\"               \n[4] \"Положительное число\" \"Положительное число\"\n```\n:::\n\n```{.r .cell-code}\nnumber\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] -3 -1  0  2  5\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ncase_when(\n  number > 0 ~ \"Положительное число\",\n  number < 0 ~ \"Отрицательное число\",\n  TRUE ~ \"Ноль\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Отрицательное число\" \"Отрицательное число\" \"Ноль\"               \n[4] \"Положительное число\" \"Положительное число\"\n```\n:::\n:::\n\n:::\n:::\n\nМожно задать дефолтное значение для не попадающих ни под одно условие с помощью формулы: `TRUE ~ <значение>`.\n\n## `mutate` с условием + `case_when`\n\nПример с `mutate()` + `case_when()` для разделения юнитов на группы по количеству здоровья (`hp`).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  mutate(hp_rate = case_when(hp > 1000 ~ \"The most healthy units\",\n  hp > 500 ~ \"Middle helthy units\",\n  TRUE ~ \"The weakest\")) %>% \n  relocate(hp_rate, .after = hp) %>% # для перемещения колонки после hp\n  select(unit:hp_rate) %>% \n  slice_sample(n = 6)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 7\n  unit             race    gold  wood   pop    hp hp_rate               \n  <chr>            <chr>  <dbl> <dbl> <dbl> <dbl> <chr>                 \n1 Obsidian Statue  Undead   200    35     3   550 Middle helthy units   \n2 Mountain Giant   N.Elf    425   100     7  1600 The most healthy units\n3 Glaive Thrower   N.Elf    210    65     3   300 The weakest           \n4 T. Headhunter    Orc      135    20     2   350 The weakest           \n5 Kodo Beast       Orc      255    60     4  1000 Middle helthy units   \n6 Carrion Beetle 2 Undead    NA    NA     0   275 The weakest           \n```\n:::\n:::\n\n\n# Подсчет суммарных статистик\n\n## `group_by()` + `summarise()` связка\n\nЭто очень мощная связка, удобных аналогов которой нет в base R.\n\nПопробуем посчитать медиану урона (`damage`) для каждой расы.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  group_by(race) %>% \n  summarise(median_damage = median(damage, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 2\n  race   median_damage\n  <chr>          <dbl>\n1 Human           20  \n2 N.Elf           19.2\n3 Orc             19.5\n4 Undead          16.5\n```\n:::\n:::\n\n\n## `group_by()` + `summarise()` связка\n\nМожно сразу собирать несколько статистик:\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nwc3_units %>% \n  group_by(race) %>% \n  summarise(mean_damage = mean(damage, na.rm = TRUE),\n            mean_hp = mean(hp, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 3\n  race   mean_damage mean_hp\n  <chr>        <dbl>   <dbl>\n1 Human         27.7    556.\n2 N.Elf         28.8    649.\n3 Orc           22.9    483.\n4 Undead        27.5    518.\n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\nИллюстрация что происходит с таблицей при использовании `group_by()` + `summarise()`\n\n![Data Wrangling with dplyr and tidyr](https://moderndive.github.io/moderndive_labs/static/previous_versions/v0.4.0/images/group_summary.png){alt=\"Data Wrangling with dplyr and tidyr\"}\n\n## `across()` + `summarise()` - для быстрого вычисления описательных статистик\n\nНапример, задача посчитать медиану для всех числовых переменных в датасете `wc3_units`.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units_summon %>%\n  filter(!is_summon) %>% # чтобы анализировать только не-призванных юнитов\n  group_by(race) %>% \n  summarise(across(where(is.numeric), \n                   function(x) median(x, na.rm = TRUE)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 18\n  race    gold  wood   pop    hp armor sight speed  time damage cooldown   dps\n  <chr>  <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>    <dbl> <dbl>\n1 Human   188.  30     3    420    1     140   270    28   14       1.9   10.4\n2 N.Elf   195   60     3    488.   1     140   270    35   20.5     1.78  13.6\n3 Orc     180   35     3    450    0     140   270    30   19.5     1.9   11.1\n4 Undead  192.  32.5   2.5  395    0.5   140   270    30   19.5     2     10  \n# ℹ 6 more variables: range <dbl>, damage_2 <dbl>, cooldown_2 <dbl>,\n#   dps_2 <dbl>, range_2 <dbl>, damage_per_second <dbl>\n```\n:::\n:::\n\n\n## `across()` + `summarise()` - для быстрого вычисления описательных статистик {style=\"font-size: 90%\"}\n\nИли пример попроще: посчитать среднее и стандартное отклонение в датасете `iris` (можно без группировки по видам `Species`).\n\n\n::: {.cell output-location='default'}\n\n```{.r .cell-code}\niris %>% \n  summarise(across(where(is.numeric), \n                   list(mean = mean, sd = sd)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Sepal.Length_mean Sepal.Length_sd Sepal.Width_mean Sepal.Width_sd\n1          5.843333       0.8280661         3.057333      0.4358663\n  Petal.Length_mean Petal.Length_sd Petal.Width_mean Petal.Width_sd\n1             3.758        1.765298         1.199333      0.7622377\n```\n:::\n:::\n\n\nНа самом деле здесь я бы скорее перевела данные в long format и потом уже считала статистики, но идея должна быть понятна.\n\n::: callout-note\nСинтаксис `across()` похож на функции семейства `apply()` и `map_*()`. Сначала пишем, для каких колонок провести функцию, и далее саму функцию - встроенную, анонимную или созданную пользователем.\n:::\n\n## `across()` + `mutate()` {style=\"font-size: 90%\"}\n\nЭто очень актуальная вещь при работе с транскриптомными данными. Например, заменить `logFC`, которые не `NA` и не ноль на 1. Создадим пример таблицы:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngene_table <- tibble(id = paste0('gene', 1:8), \n                     logFC_df1 = sample(c(0, runif(6, min = -5, max = 5), NA), 8),\n                     FDR_df1 = sample(c(runif(6, 10^-50, 1), 0.01, 0.0005), 8),\n                     logFC_df2 = sample(c(0, runif(6, min = -5, max = 5), NA), 8),\n                     FDR_df2 = sample(c(runif(6, 10^-50, 1), 0.001, 0.03), 8))\ngene_table\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 5\n  id    logFC_df1 FDR_df1 logFC_df2 FDR_df2\n  <chr>     <dbl>   <dbl>     <dbl>   <dbl>\n1 gene1    NA      0.0842     2.77   0.779 \n2 gene2     2.32   0.0005     0      0.455 \n3 gene3     0      0.01       4.61   0.797 \n4 gene4    -4.77   0.332     -0.653  0.03  \n5 gene5    -0.228  0.258      2.13   0.001 \n6 gene6     3.61   0.479     -1.00   0.0589\n7 gene7     1.93   0.651     -1.10   0.876 \n8 gene8    -0.224  0.766     NA      0.642 \n```\n:::\n:::\n\n\n## `across()` + `mutate()` {.smaller}\n\nТеперь заменим:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngene_table %>% \n  mutate(across(starts_with('logFC'), \n                function(x) if_else(x == 0 | is.na(x), 0, 1)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 5\n  id    logFC_df1 FDR_df1 logFC_df2 FDR_df2\n  <chr>     <dbl>   <dbl>     <dbl>   <dbl>\n1 gene1         0  0.0842         1  0.779 \n2 gene2         1  0.0005         0  0.455 \n3 gene3         0  0.01           1  0.797 \n4 gene4         1  0.332          1  0.03  \n5 gene5         1  0.258          1  0.001 \n6 gene6         1  0.479          1  0.0589\n7 gene7         1  0.651          1  0.876 \n8 gene8         1  0.766          0  0.642 \n```\n:::\n:::\n\n\nЕще нередко возникает задача например занулить все незначимые по `FDR` значения `logFC` для каждого датасета, но это лучше сделать, используя перевод данных из широкого в длинный формат и обратно.\n\n## `arrange()` - сортировка\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_elf_dm40 <-  wc3_units %>% \n  filter(race == 'N.Elf' & damage > 40) %>% \n  select(unit:race, ground_attack:damage) %>% \n  arrange(damage)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> unit </th>\n   <th style=\"text-align:left;\"> race </th>\n   <th style=\"text-align:left;\"> ground_attack </th>\n   <th style=\"text-align:right;\"> damage </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Mountain Giant 2 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 41.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Glaive Thrower </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 44.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Chimaera 2 </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:left;\"> Siege </td>\n   <td style=\"text-align:right;\"> 50.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Chimaera </td>\n   <td style=\"text-align:left;\"> N.Elf </td>\n   <td style=\"text-align:left;\"> Magic </td>\n   <td style=\"text-align:right;\"> 75.0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n`desc()` - для сортировки по убыванию.\n\nКак думаете, есть ли преимущество относительно базовой функции `order()` или `sort()`, в которой есть параметр `decreasing = TRUE`?\n\n## Сортировка по нескольким колонкам\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  arrange(desc(damage), desc(hp), unit) %>% \n  select(unit:hp, damage)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 71 × 7\n   unit          race    gold  wood   pop    hp damage\n   <chr>         <chr>  <dbl> <dbl> <dbl> <dbl>  <dbl>\n 1 Frost Wyrm    Undead   385   120     7  1350  104  \n 2 Demolisher    Orc      220    50     4   425   80.5\n 3 Meat Wagon    Undead   230    50     4   380   79.5\n 4 Chimaera      N.Elf    330    70     5  1000   75  \n 5 Phoenix       Human     NA    NA    NA  1250   68  \n 6 Mortar Team   Human    180    70     3   360   58  \n 7 Infernal      Undead    NA    NA    NA  1500   54.5\n 8 Chimaera 2    N.Elf    330    70     5  1000   50  \n 9 Gryphon Rider Human    280    70     4   825   50  \n10 Siege Engine  Human    195    60     3   700   50  \n# ℹ 61 more rows\n```\n:::\n:::\n\n\n## Другие функции: `count()`\n\n`count()` - для удобного подсчета количества элементов по категориям. Можно выводить по нескольким категориям сразу\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  count(race)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 2\n  race       n\n  <chr>  <int>\n1 Human     17\n2 N.Elf     19\n3 Orc       17\n4 Undead    18\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nwc3_units %>% \n  count(race, ground_attack)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 19 × 3\n   race   ground_attack     n\n   <chr>  <chr>         <int>\n 1 Human  Magic             4\n 2 Human  Normal            5\n 3 Human  Pierce            5\n 4 Human  Siege             3\n 5 N.Elf  Magic             3\n 6 N.Elf  Normal            6\n 7 N.Elf  Pierce            5\n 8 N.Elf  Siege             3\n 9 N.Elf  <NA>              2\n10 Orc    Magic             3\n11 Orc    Normal            6\n12 Orc    Pierce            5\n13 Orc    Siege             3\n14 Undead Chaos             1\n15 Undead Magic             5\n16 Undead Normal            7\n17 Undead Pierce            3\n18 Undead Siege             1\n19 Undead <NA>              1\n```\n:::\n:::\n\n:::\n:::\n\nКак думаете, для чего это может быть полезно?\n\n## Широкий и длинный формат данных\n\nДанные в широком формате\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(iris)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Sepal.Length Sepal.Width Petal.Length Petal.Width Species\n1          5.1         3.5          1.4         0.2  setosa\n2          4.9         3.0          1.4         0.2  setosa\n3          4.7         3.2          1.3         0.2  setosa\n4          4.6         3.1          1.5         0.2  setosa\n5          5.0         3.6          1.4         0.2  setosa\n6          5.4         3.9          1.7         0.4  setosa\n```\n:::\n:::\n\n\nДанные в длинном формате:\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 4\n  id    Species name         value\n  <chr> <fct>   <chr>        <dbl>\n1 1     setosa  Sepal.Length   5.1\n2 1     setosa  Sepal.Width    3.5\n3 1     setosa  Petal.Length   1.4\n4 1     setosa  Petal.Width    0.2\n5 2     setosa  Sepal.Length   4.9\n```\n:::\n:::\n\n\n## `pivot_longer()` / `pivot_wider()` - конвертация таблиц {style=\"font-size: 90%\"}\n\nЭто функции из пакета `tidyr` для перевода датафрейма в длинный или широкий формат.\n\nВ простейшем случае синтаксис pivot_longer: `cols` = колонки, которые необходимо трансформировать. Можно добавить параметры `names_to` и `values_to`, которые добавят имена вновь возданным колонкам.\n\n\n::: {.cell}\n\n```{.r .cell-code}\niris_long <- iris %>% \n  rownames_to_column(var = 'id') %>% # чтобы создать переменную id из номеров колонок\n  pivot_longer(cols = Sepal.Length:Petal.Width)\niris_long\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 600 × 4\n   id    Species name         value\n   <chr> <fct>   <chr>        <dbl>\n 1 1     setosa  Sepal.Length   5.1\n 2 1     setosa  Sepal.Width    3.5\n 3 1     setosa  Petal.Length   1.4\n 4 1     setosa  Petal.Width    0.2\n 5 2     setosa  Sepal.Length   4.9\n 6 2     setosa  Sepal.Width    3  \n 7 2     setosa  Petal.Length   1.4\n 8 2     setosa  Petal.Width    0.2\n 9 3     setosa  Sepal.Length   4.7\n10 3     setosa  Sepal.Width    3.2\n# ℹ 590 more rows\n```\n:::\n:::\n\n\n## `pivot_longer()`\n\n::: columns\n::: {.column width=\"50%\"}\n![](figures/sandwich_pivot.PNG){width=\"1500\"}\n:::\n\n::: {.column width=\"50%\"}\nДля выбора колонок можно использовать концепт `tidy-select`-а.\n\nЛучше всего еще перед трансформацией создать колонку с id каждого наблюдения.\n\nДлинный формат более удобен для проведения дисперсионного анализа, построения графиков.\n:::\n:::\n\n## `pivot_wider()`\n\nНередко нужно вернуть обратно таблицу в широкий формат\n\nНапример так:\n\n\n::: {.cell}\n\n```{.r .cell-code}\niris_long %>% \n  pivot_wider(id_cols = c(id, Species), \n              names_from = name, values_from = value)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 150 × 6\n   id    Species Sepal.Length Sepal.Width Petal.Length Petal.Width\n   <chr> <fct>          <dbl>       <dbl>        <dbl>       <dbl>\n 1 1     setosa           5.1         3.5          1.4         0.2\n 2 2     setosa           4.9         3            1.4         0.2\n 3 3     setosa           4.7         3.2          1.3         0.2\n 4 4     setosa           4.6         3.1          1.5         0.2\n 5 5     setosa           5           3.6          1.4         0.2\n 6 6     setosa           5.4         3.9          1.7         0.4\n 7 7     setosa           4.6         3.4          1.4         0.3\n 8 8     setosa           5           3.4          1.5         0.2\n 9 9     setosa           4.4         2.9          1.4         0.2\n10 10    setosa           4.9         3.1          1.5         0.1\n# ℹ 140 more rows\n```\n:::\n:::\n\n\n## Теперь как занулить все незначимые фолды\n\nВернемся к таблице gene_table. Задача превратить в ноль все фолды, для которых `FDR > 0.05`. Используем сразу несколько подходов к манипуляции с таблицами.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngene_table %>% \n  pivot_longer(cols = where(is.numeric), names_pattern = \"(.*)_(.*)\",\n               names_to = c('.value', 'dataset')) %>% \n  mutate(logFC = if_else(FDR < 0.05, logFC, 0)) %>% \n  pivot_wider(id_cols = id, names_from = dataset, \n              values_from = c(logFC, FDR), names_vary = 'slowest') \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 5\n  id    logFC_df1 FDR_df1 logFC_df2 FDR_df2\n  <chr>     <dbl>   <dbl>     <dbl>   <dbl>\n1 gene1      0     0.0842     0      0.779 \n2 gene2      2.32  0.0005     0      0.455 \n3 gene3      0     0.01       0      0.797 \n4 gene4      0     0.332     -0.653  0.03  \n5 gene5      0     0.258      2.13   0.001 \n6 gene6      0     0.479      0      0.0589\n7 gene7      0     0.651      0      0.876 \n8 gene8      0     0.766      0      0.642 \n```\n:::\n:::\n\n\n## `join()` - для объединения таблиц\n\nЧасто необходим для объединения сходных табличек.\n\n-   `inner_join()` - объединяет только общие строки в обеих таблицах;\n\n-   `full_join()` - объединяет все строки в обеих таблицах;\n\n-   `left_join()` - все строки из первой таблицы и те строки из второй, которые есть в первой;\n\n-   `right_join()` - принцип как у `left_join`, только наоборот (используется редко).\n\n![](https://d33wubrfki0l68.cloudfront.net/aeab386461820b029b7e7606ccff1286f623bae1/ef0d4/diagrams/join-venn.png)\n\n## `join()` - пример {.smaller}\n\nНапример, нужно объединить результаты анализа дифференциальной экспрессии данных микрочипов и RNA-seq.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 <- tibble(id = paste0('gene', 1:6), logFC_df1 = runif(6, -5, 5),\n              FDR_df1 = runif(6, 0.000001, 1))\ndf2 <- tibble(id = paste0('gene', 3:8), logFC_df2 = runif(6, -5, 5),\n              FDR_df2 = runif(6, 0.000001, 1))\n```\n:::\n\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 3\n  id    logFC_df1 FDR_df1\n  <chr>     <dbl>   <dbl>\n1 gene1    -3.71   0.357 \n2 gene2    -0.219  0.431 \n3 gene3     4.24   0.148 \n4 gene4     0.988  0.0131\n5 gene5     4.76   0.716 \n6 gene6     2.32   0.103 \n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndf2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 3\n  id    logFC_df2 FDR_df2\n  <chr>     <dbl>   <dbl>\n1 gene3   -0.537    0.755\n2 gene4    1.40     0.454\n3 gene5    4.92     0.511\n4 gene6   -0.0441   0.208\n5 gene7   -0.157    0.229\n6 gene8   -3.27     0.596\n```\n:::\n:::\n\n:::\n:::\n\nЕсть общие айди генов, есть уникальные в каждом датасете. Какой вид джойна подойдет в этом случае?\n\n## `join()` - продолжение\n\nЯ обычно использую `full_join`, потому что не хочу терять какую-либо информацию о данных.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfull_join(df1, df2, by = 'id')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 5\n  id    logFC_df1 FDR_df1 logFC_df2 FDR_df2\n  <chr>     <dbl>   <dbl>     <dbl>   <dbl>\n1 gene1    -3.71   0.357    NA       NA    \n2 gene2    -0.219  0.431    NA       NA    \n3 gene3     4.24   0.148    -0.537    0.755\n4 gene4     0.988  0.0131    1.40     0.454\n5 gene5     4.76   0.716     4.92     0.511\n6 gene6     2.32   0.103    -0.0441   0.208\n7 gene7    NA     NA        -0.157    0.229\n8 gene8    NA     NA        -3.27     0.596\n```\n:::\n:::\n\n\nЕсли столбцы `id`, по которым будет проходить джойн неодинаковые, можно задать например так: `full_join(df1, df2, by = c('gene_id' = 'id'))`.\n\n## Считывание данных в формате Excel\n\nБиблиотека `readxl`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\ndf <- read_xlsx('table.xlsx', sheet = 'Sheet1')\n```\n:::\n\n\n## Заключение {style=\"font-size: 90%\"}\n\nМы прошли основные функции для преобразования таблиц.\n\n::: columns\n::: {.column width=\"50%\"}\n-   Для работы с колонками:\n\n    -   `select` - выбрать несколько колонок и `pull`- выбрать одну колонку как вектор\n\n    -   `mutate` - изменить колонку/и\n\n    -   `across` в связке с `mutate` и `summarise`\n\n    -   `case_when` - аналог `if_else` для нескольких условий\n\n    -   `arrange` - сортировка по какой-либо колонке\n\n    -   `relocate` - перемещение колонки\n:::\n\n::: {.column width=\"50%\"}\n-   Для работы со строками:\n\n    -   `count` - посчитать количество наблюдений по группам\n\n    -   `filter` - выбрать строки по условию\n\n    -   `slice` (выбрать строки по индексу) и его товарищи:\n\n        -   `slice_max`, `slice_min` отобрать наибольшие/наименьшие значения по какой-либо переменной\n\n        -   `slice_sample` случайно выбрать несколько строк из датасета\n:::\n:::\n\n------------------------------------------------------------------------\n\nДля работы со всей таблицей целиком:\n\n-   `group_by` - сгруппировать датасет\n\n-   `summarise` - что-то подсчитать по датасету\n\n-   `pivot_longer` / `pivot_wider` перевод таблицы в длинный и широкий формат\n\n-   `full_join`, `inner_join`, `left_join`\n\n## Вопросы?\n\n::: columns\n::: {.column width=\"40%\"}\nПоддержать можно [здесь](https://www.tinkoff.ru/rm/ubogoeva.elena1/TSRBI31474):\n\n![](images/qrcode.png){width=\"233\"}\n\nПодписывайтесь на телеграм-канал: [Статистика и R](https://t.me/stats_for_science)\n\n![](images/paste-78E5F205.png){width=\"212\"}\n:::\n\n::: {.column width=\"50%\"}\nА еще мы заказывали значки и стикеры с `tidyverse` в RStudio office\n\n![](images/paste-078A24F8.png){width=\"570\"}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ],
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}